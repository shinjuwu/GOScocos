{"version":3,"sources":["connect.js"],"names":["mqtt","require","cfg","load","console","log","client","connect","protocolId","protocolVersion","clientId","Math","random","toString","substr","reconnectPeriod","sendMessage","msgid","body","publish","bind","on","topic","payload","join","arguments","module","exports"],"mappings":";;;;;;AAAA,IAAIA,OAAKC,QAAQ,gBAAR,CAAT;AACE,IAAIC,MAAM;AACTC,OAAM,gBAAY;AACjBC,UAAQC,GAAR,CAAY,MAAZ;AACA,MAAIC,SAASN,KAAKO,OAAL,CAAa,qBAAb,EAAmC;;AAEhD;AACA;AACCC,eAAY,QAJmC;AAK/CC,oBAAiB,CAL8B;AAM/CC,aAAS,YAAYC,KAAKC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAN0B;AAO/CC,oBAAgB,CAP+B,CAO5B;AAP4B,GAAnC,CAAb,CAFiB,CAUd;AACHT,SAAOU,WAAP,GAAmB,UAAWC,KAAX,EAAiBC,IAAjB,EAAuB;AACzC;AACA;AACAZ,UAAOa,OAAP,CAAe,kBAAf,EAAmCD,IAAnC;AACA,GAJkB,CAIjBE,IAJiB,CAIZd,MAJY,CAAnB;AAKAA,SAAOe,EAAP,CAAU,SAAV,EAAqB,UAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AAC9CnB,WAAQC,GAAR,CAAY,CAACiB,KAAD,EAAQC,OAAR,EAAiBC,IAAjB,CAAsB,IAAtB,CAAZ;AACA;AACA;AACA,GAJD;AAKAlB,SAAOe,EAAP,CAAU,SAAV,EAAqB,YAAY;AAChC;AACAjB,WAAQC,GAAR,CAAY,SAAZ;AACAC,UAAOU,WAAP,CAAmB,IAAnB,EAAwB,mDAAxB;AACA,GAJD;AAKAV,SAAOe,EAAP,CAAU,WAAV,EAAuB,YAAY;AAClC;AACA,GAFD;AAGAf,SAAOe,EAAP,CAAU,OAAV,EAAmB,YAAY;AAC9BjB,WAAQC,GAAR,CAAY,OAAZ;AACA,GAFD;AAGAC,SAAOe,EAAP,CAAU,OAAV,EAAmB,YAAY;AAC9BjB,WAAQC,GAAR,CAAY,OAAZ;AACAD,WAAQC,GAAR,CAAYoB,SAAZ;AACA,GAHD;AAIA;AArCQ,CAAV;;AAwCAC,OAAOC,OAAP,GAAiBzB,GAAjB","file":"connect.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var mqtt=require(\"../Lib/umdMqtt\");\r\n  var cfg = {\r\n\t  load: function () {\r\n\t\t  console.log('mqtt')\r\n\t\t  var client = mqtt.connect(\"ws://127.0.0.1:3653\",{\r\n\t\t\t  \r\n\t\t  //var client = mqtt.connect(\"egret://127.0.0.1:3653\",{\r\n\t\t  //var client = mqtt.connect(\"laya://127.0.0.1:3653\",{\r\n\t\t\t  protocolId: 'MQIsdp',\r\n\t\t\t  protocolVersion: 3,\r\n\t\t\t  clientId:'mqttjs_' + Math.random().toString(16).substr(2, 8),\r\n\t\t\t  reconnectPeriod:0, //不自动重连\r\n\t\t  }) // you add a ws:// url here\r\n\t\t  client.sendMessage=function  (msgid,body) {\r\n\t\t\t  //发送数据\r\n\t\t\t  //这里是发送消息给服务端，可以先将 msgid 转 topic\r\n\t\t\t  client.publish(\"Login/HD_Login/1\", body)\r\n\t\t  }.bind(client);\r\n\t\t  client.on(\"message\", function (topic, payload) {\r\n\t\t\t  console.log([topic, payload].join(\": \"))\r\n\t\t\t  //这里可以将 topic 转成 msgid 传给上一级代码\r\n\t\t\t  //client.end()\r\n\t\t  })\r\n\t\t  client.on('connect', function () {\r\n\t\t\t  //连接成功了，这里可以进行登陆操作\r\n\t\t\t  console.log('connect')\r\n\t\t\t  client.sendMessage(3001,\"{\\\"userName\\\":\\\"xxxxx\\\", \\\"passWord\\\":\\\"123456\\\"}\")\r\n\t\t  })\r\n\t\t  client.on('reconnect', function () {\r\n\t\t\t  //当一个重连开始\r\n\t\t  })\r\n\t\t  client.on('close', function () {\r\n\t\t\t  console.log('close')\r\n\t\t  })\r\n\t\t  client.on('error', function () {\r\n\t\t\t  console.log('error')\r\n\t\t\t  console.log(arguments)\r\n\t\t  })\r\n\t  }\r\n  };\r\n  \r\n  module.exports = cfg;"]}